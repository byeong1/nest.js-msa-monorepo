# ğŸ—ï¸ NestJS MSA (ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜)

ì™„ì „íˆ ë…ë¦½ì ì¸ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë“¤ë¡œ êµ¬ì„±ëœ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
nest.js-msa-monorepo/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ api-gateway/      # API ê²Œì´íŠ¸ì›¨ì´ (í¬íŠ¸: 3000)
â”‚   â”œâ”€â”€ user-service/     # ì‚¬ìš©ì ê´€ë¦¬ ì„œë¹„ìŠ¤ (í¬íŠ¸: 3001)
â”‚   â””â”€â”€ post-service/     # ê²Œì‹œê¸€ ê´€ë¦¬ ì„œë¹„ìŠ¤ (í¬íŠ¸: 3002)
â””â”€â”€ package.json          # ì„œë¹„ìŠ¤ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
```

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### **ğŸ¯ ë£¨íŠ¸ì—ì„œ í†µí•© ê´€ë¦¬ (ê¶Œì¥)**

```bash
# 1. ëª¨ë“  ì„œë¹„ìŠ¤ ì˜ì¡´ì„± ì„¤ì¹˜
yarn install:all

# 2. ëª¨ë“  ì„œë¹„ìŠ¤ ë™ì‹œ ì‹¤í–‰ (ê°œë°œ ëª¨ë“œ)
yarn dev
# ë˜ëŠ”
yarn start:all

# 3. ê°œë³„ ì„œë¹„ìŠ¤ ì‹¤í–‰
yarn start:user    # User Serviceë§Œ
yarn start:post    # Post Serviceë§Œ
yarn start:api     # API Gatewayë§Œ

# 4. í”„ë¡œë•ì…˜ ë¹Œë“œ & ì‹¤í–‰
yarn prod
```

### **ğŸ“‹ ê¸°íƒ€ ìœ ìš©í•œ ëª…ë ¹ì–´**

```bash
# ëª¨ë“  ì„œë¹„ìŠ¤ ë¹Œë“œ
yarn build:all

# ëª¨ë“  ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸
yarn test:all

# ëª¨ë“  ì„œë¹„ìŠ¤ ë¦°íŠ¸
yarn lint:all

# ëª¨ë“  ì„œë¹„ìŠ¤ í´ë¦°
yarn clean:all

# ì´ˆê¸° ì„¤ì • (ì˜ì¡´ì„± ì„¤ì¹˜ + ë¹Œë“œ)
yarn setup
```

### **ğŸ”§ ê°œë³„ ì„œë¹„ìŠ¤ ì‹¤í–‰ (í•„ìš”ì‹œ)**

```bash
# User Service
cd apps/user-service
yarn install
yarn start:dev

# Post Service
cd apps/post-service
yarn install
yarn start:dev

# API Gateway
cd apps/api-gateway
yarn install
yarn start:dev
```

## ğŸ”§ ì„œë¹„ìŠ¤ ë…ë¦½ì„±

- **ì™„ì „ ë…ë¦½**: ê° ì„œë¹„ìŠ¤ëŠ” ê³ ìœ í•œ `package.json`, `node_modules` ë³´ìœ 
- **ë…ë¦½ ë°°í¬**: ì„œë¹„ìŠ¤ë³„ë¡œ ê°œë³„ ë¹Œë“œ/ë°°í¬ ê°€ëŠ¥
- **ê¸°ìˆ  ìŠ¤íƒ ììœ ë„**: ì„œë¹„ìŠ¤ë§ˆë‹¤ ë‹¤ë¥¸ ë²„ì „/ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš© ê°€ëŠ¥
- **íŒ€ ë…ë¦½ì„±**: ì„œë¹„ìŠ¤ë³„ë¡œ ë‹¤ë¥¸ íŒ€ì´ ê°œë°œ ê°€ëŠ¥
- **í†µí•© ê´€ë¦¬**: ë£¨íŠ¸ì—ì„œ ëª¨ë“  ì„œë¹„ìŠ¤ë¥¼ í¸ë¦¬í•˜ê²Œ ê´€ë¦¬

## ğŸ“¡ ì„œë¹„ìŠ¤ ê°„ í†µì‹ 

- **ë°©ì‹**: TCP Transport (NestJS Microservices)
- **API Gateway**: í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì˜ ìœ ì¼í•œ ì§„ì…ì 
- **ì¸ì¦**: JWT í† í° ê¸°ë°˜

## ğŸ”— API ì—”ë“œí¬ì¸íŠ¸

### **ì‚¬ìš©ì ê´€ë¦¬**

- `POST /api/users/register` - ì‚¬ìš©ì ë“±ë¡
- `POST /api/users/login` - ë¡œê·¸ì¸
- `GET /api/users/profile` - í”„ë¡œí•„ ì¡°íšŒ
- `PUT /api/users/profile` - í”„ë¡œí•„ ìˆ˜ì •

### **ê²Œì‹œê¸€ ê´€ë¦¬**

- `POST /api/posts` - ê²Œì‹œê¸€ ì‘ì„±
- `GET /api/posts` - ê²Œì‹œê¸€ ëª©ë¡ (í˜ì´ì§•)
- `GET /api/posts/:id` - ê²Œì‹œê¸€ ìƒì„¸
- `PUT /api/posts/:id` - ê²Œì‹œê¸€ ìˆ˜ì •
- `DELETE /api/posts/:id` - ê²Œì‹œê¸€ ì‚­ì œ

## ğŸ³ Docker ë°°í¬ (í–¥í›„ ê³„íš)

ê° ì„œë¹„ìŠ¤ë¥¼ ë…ë¦½ì ì¸ Docker ì»¨í…Œì´ë„ˆë¡œ ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```bash
# ê° ì„œë¹„ìŠ¤ë³„ Dockerfile ìƒì„± ì˜ˆì •
# docker-compose.ymlë¡œ ì „ì²´ ì‹œìŠ¤í…œ ê´€ë¦¬ ì˜ˆì •
```
